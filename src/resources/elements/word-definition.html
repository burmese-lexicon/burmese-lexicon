<template>
  <require from='./word-definition.scss'></require>
  <require from='../value-converters/date-format'></require>

  <div class="comment ui item" css='opacity: ${votes <= -3 ? 0.2 : 1}'>
    <div class="content">
      <div class="text" innerhtml.bind='text | sanitizeHTML'></div>
      <div class='attribution'>
        <div class="actions">
          <a if.bind='authService.userId !== author.uid' class="reply ${userVotedUpOrDown === 'up' ? 'up' : ''}" click.delegate='vote("up")'><i class="caret up icon"></i></a>
          <span>${voteCount}</span>
          <a if.bind='authService.userId !== author.uid' class="reply ${userVotedUpOrDown === 'down' ? 'down' : ''}" click.delegate='vote("down")'><i class="caret down icon"></i></a>
          <a if.bind='authService.userId === author.uid' class='reply' click.delegate="handleEdit()"><i class="edit icon"></i></a>
          <a if.bind='authService.userId === author.uid' class='reply' click.delegate='handleDelete()'><i class="trash icon"></i></a>
        </div>
        <div class="metadata">
          <span class="date" textcontent.bind='createdAt | dateFormat'></span>
        </div>
        <div class='author-info'>
          <a if.bind='author.photoURL'>
            <img src='${author.photoURL}' class="ui avatar image">
          </a>
          <a class="author">${author.name}</a>
        </div>
      </div>
    </div>
  </div>
</template>
