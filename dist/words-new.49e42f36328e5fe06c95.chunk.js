(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"resources/elements/new-word-page":function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"NewWordPage",function(){return f});var i=r(31),n=r(37),o=r("aurelia-framework"),a=r("aurelia-validation"),s=r(64),l=function(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(t,r,i,n){return new(i||(i=e))(function(e,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){t.done?e(t.value):new i(function(e){e(t.value)}).then(a,s)}l((n=n.apply(t,r||[])).next())})},d=function(e,t){var r,i,n,o,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,i&&(n=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(i,o[1])).done)return n;switch(i=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},f=function(){function e(e,t,r,i,n){this.validationControllerFactory=e,this.validator=t,this.wordApi=r,this.authService=i,this.router=n,this.MAX_DEFFINITION_LENGTH=500,this.MAX_WORD_LENGTH=20,this.isFormValid=!1,this.controller=e.createForCurrentScope(t),this.controller.validateTrigger=a.validateTrigger.changeOrBlur,this.controller.subscribe(this.updateIsFormValid.bind(this)),a.ValidationRules.ensure(function(e){return e.word}).matches(/^[\u1000-\u109F]*$/).withMessage("${$displayName} can only have Burmese letters and no spaces.").maxLength(this.MAX_WORD_LENGTH).required().ensure(function(e){return e.definition}).maxLength(this.MAX_DEFFINITION_LENGTH).required().ensure(function(e){return e.agreedTOS}).equals(!0).withMessage("${$displayName} is required.").required().on(this)}return e.prototype.activate=function(e){this.word=e.word},e.prototype.updateIsFormValid=function(e){var t=this;this.validator.validateObject(this).then(function(e){t.isFormValid=e.every(function(e){return e.valid})}),this.formState=""},e.prototype.submit=function(){return c(this,void 0,void 0,function(){var e,t=this;return d(this,function(r){switch(r.label){case 0:this.formState="loading",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wordApi.addWord(this.word,this.definition,this.authService.user.uid)];case 2:return r.sent(),this.formState="success",window.setTimeout(function(){return t.router.navigate("/words/"+t.word)},3e3),[3,4];case 3:return e=r.sent(),console.error(e),this.formState="error",[3,4];case 4:return[2]}})})},e=l([o.b,u("design:paramtypes",[a.ValidationControllerFactory,a.Validator,s.a,n.a,i.d])],e)}()}.call(this,r(11))},"resources/elements/new-word-page.html":function(e,t,r){e.exports='<template> <require from=./new-word-page.scss></require> <div class="centered wide column"> <form class="ui form ${controller.errors.length ? \'error\' : \'\'} ${formState}" submit.delegate=submit()> <h1 class="ui header">Add new word</h1> <em>Please use the search box to make sure the word doesn\'t already exist</em> <ul if.bind="formState !== \'error\' && controller.errors" class="ui error message"> <li repeat.for="error of controller.errors"> ${error.message} </li> </ul> <div class="ui success message"> The word ${word} has been added successfully. </div> <div class="ui error message" if.bind=\'formState === "error"\'> There was an error adding the word. Please try again later. </div> <div class="required field"> <label>Word</label> <input type=text name=word placeholder=စကားလုံး value.bind="word & validate" required> </div> <div class="required field"> <label>Definition</label> <em>Definitions can have maximum ${MAX_DEFFINITION_LENGTH} characters.</em> <textarea name=definition rows=3 maxlength.one-time=MAX_DEFFINITION_LENGTH value.bind="definition & validate" placeholder=အနက်ဖွင့်ဆုိချက်></textarea> </div> <div class="required field"> <div class="ui checkbox"> <input id=tos-checkbox type=checkbox tabindex=0 class=hidden checked.bind="agreedTOS & validate" required> <label for=tos-checkbox>I agree to the Terms and Conditions</label> </div> </div> <button class="ui button ${!isFormValid ? \'disabled\' : \'\'}" type=submit>Submit</button> </form> </div> </template> '},"resources/elements/new-word-page.scss":function(e,t,r){(e.exports=r(53)(!1)).push([e.i,".new-word-page input{max-width:25em}",""])}}]);
//# sourceMappingURL=words-new.49e42f36328e5fe06c95.bundle.map